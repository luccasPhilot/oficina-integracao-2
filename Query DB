-- Tabela administradores
CREATE TABLE "administradores" (
    "id" VARCHAR(8) PRIMARY KEY,
    "nome" VARCHAR(255) NOT NULL,
    "usuario" VARCHAR(100) NOT NULL UNIQUE,
    "senha" VARCHAR(255) NOT NULL,
    "createdAt" TIMESTAMP WITH TIME ZONE DEFAULT now(),
    "updatedAt" TIMESTAMP WITH TIME ZONE DEFAULT now()
);

-- Tabela escolas
CREATE TABLE "escolas" (
    "id" VARCHAR(8) PRIMARY KEY,
    "nome" VARCHAR(255) NOT NULL,
    "endereco" TEXT,
    "cidade" VARCHAR(150),
    "estado" CHAR(2),
    "telefone" VARCHAR(20),
    "email" VARCHAR(255) UNIQUE,
    "createdAt" TIMESTAMP WITH TIME ZONE DEFAULT now(),
    "updatedAt" TIMESTAMP WITH TIME ZONE DEFAULT now()
);

-- Tabela representantes
CREATE TABLE "representantes" (
    "id" VARCHAR(8) PRIMARY KEY,
    "nome" VARCHAR(255) NOT NULL,
    "cargo" VARCHAR(100),
    "telefone" VARCHAR(20),
    "escola_id" VARCHAR(8) NOT NULL,
    "createdAt" TIMESTAMP WITH TIME ZONE DEFAULT now(),
    "updatedAt" TIMESTAMP WITH TIME ZONE DEFAULT now(),
    CONSTRAINT "fk_representante_escola"
        FOREIGN KEY ("escola_id")
        REFERENCES "escolas"("id")
        ON DELETE CASCADE
);

-- Tabela turmas
CREATE TABLE "turmas" (
    "id" VARCHAR(8) PRIMARY KEY,
    "identificacao" VARCHAR(100) NOT NULL,
    "escola_id" VARCHAR(8) NOT NULL,
    "createdAt" TIMESTAMP WITH TIME ZONE DEFAULT now(),
    "updatedAt" TIMESTAMP WITH TIME ZONE DEFAULT now(),
    CONSTRAINT "fk_turma_escola"
        FOREIGN KEY ("escola_id")
        REFERENCES "escolas"("id")
        ON DELETE CASCADE
);

-- Tabela alunos
CREATE TABLE "alunos" (
    "id" VARCHAR(8) PRIMARY KEY,
    "nome" VARCHAR(255) NOT NULL,
    "idade" INT,
    "turma_id" VARCHAR(8) NOT NULL,
    "createdAt" TIMESTAMP WITH TIME ZONE DEFAULT now(),
    "updatedAt" TIMESTAMP WITH TIME ZONE DEFAULT now(),
    CONSTRAINT "fk_aluno_turma"
        FOREIGN KEY ("turma_id")
        REFERENCES "turmas"("id")
        ON DELETE CASCADE
);
